<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: util.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: util.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * 裁剪cdn图片
 * @param {number} size  需要裁剪的尺寸
 * @param {string} imgsrc  需要裁剪的图片url
 * @returns {string} url
 */
export function transformImageSize(size, imgsrc) {
    let reg = /(.*?)\/([\w\d]*?)(_?(\d*?)x\d*?)?\.(jpg|png|gif|jpeg)$/gi;
    let arr = reg.exec(imgsrc) || [];

    if (imgsrc &amp;&amp; typeof imgsrc == 'string' &amp;&amp; !isNaN(size) &amp;&amp; size >= 0 &amp;&amp; arr.length > 0) {
        let info = {
            address: arr[1],
            name: arr[2],
            size: arr[4] || 0,
            type: arr[5]
        };

        if (info.address &amp;&amp; info.name &amp;&amp; info.type &amp;&amp; size !== info.size) {
            if (size == 0) {
                imgsrc = `${info.address}/${info.name + info.type}`;
            }
            else {
                imgsrc = `${info.address}/${info.name}_${size}x${size}.${info.type}`;
            }
        }
    }
    return imgsrc;
}

/**
 * react classname 拼接
 * @returns {string}
 */
export function concatClass() {
    return Array.prototype.join.call(arguments, ' ');
}

/**
 * 判断当前环境
 * @returns {string} development || pre_product || localhost || product
 */
export function getRelesestage() {
    let result = null,
        link = window.location.href.toLocaleLowerCase();
    if (link.indexOf('office') !== -1 || link.indexOf('test') !== -1) {
        result = 'development';
    }
    else if (link.indexOf('pre') !== -1) {
        result = 'pre_product';
    }
    else if (/^https?:\/\/(\d+\.){3}/i.test(link) || /localhost/i.test(link)) {
        result = 'localhost';
    }
    else {
        result = 'product';
    }
    return result;
}
/**
 * 数据转换器
 * @param {object} data 需要转换的数据
 * @param {object} distkv 输出的键值对
 */
export function adapter(data,distkv){
    let result = {};
    try{
        let getObjectVaule=function(data,keys){
            let val = data[keys.splice(0,1)[0]];
            if(keys.length >0){
                if(Object.prototype.toString.call(val) === '[object Object]'){
                    val = getObjectVaule(val,keys);
                }else{
                    return undefined;
                }
            }
            return val;
        };
        Object.keys(distkv).forEach((item) => {
            let keys = distkv[item].split('.');
            result[item] = getObjectVaule(data,keys);
        });
    }catch(e){
        console.log(e);
    }
    return result;
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#adapter">adapter</a></li><li><a href="global.html#Browser">Browser</a></li><li><a href="global.html#concatClass">concatClass</a></li><li><a href="global.html#countDown">countDown</a></li><li><a href="global.html#deleteCookie">deleteCookie</a></li><li><a href="global.html#diffTime">diffTime</a></li><li><a href="global.html#formatTimeStamp">formatTimeStamp</a></li><li><a href="global.html#getCookie">getCookie</a></li><li><a href="global.html#getQueryString">getQueryString</a></li><li><a href="global.html#getRelesestage">getRelesestage</a></li><li><a href="global.html#isEmtryObject">isEmtryObject</a></li><li><a href="global.html#objectAssign">objectAssign</a></li><li><a href="global.html#setCookie">setCookie</a></li><li><a href="global.html#transformImageSize">transformImageSize</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Wed Aug 28 2019 15:49:08 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
